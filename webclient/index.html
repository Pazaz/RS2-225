<!DOCTYPE html>
<html>
    <head>
        <title>RuneScape 2</title>

        <script src="https://unpkg.com/pcm-player"></script>

        <script>
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const audioCtx = new AudioContext();

            async function playWave(data, vol) {
              try {
                let buffer = await audioCtx.decodeAudioData(Uint8Array.from(data).buffer);
      
                var track = audioCtx.createBufferSource();
                track.buffer = buffer;
                track.connect(audioCtx.destination);
                track.start(0);
              } catch (err) {
                console.log(err);
              }
            }

            function setWaveVolume(vol) {
              // console.log(vol);
            }

            function playMidi(data, vol) {
              if (window._tinyMidiPlay) {
                window._tinyMidiPlay(data, vol / 256);
              }
            }

            function setMidiVolume(vol) {
              if (window._tinyMidiVolume) {
                window._tinyMidiVolume(vol / 256);
              }
            }

            function stopMidi() {
              if (window._tinyMidiStop) {
                window._tinyMidiStop();
              }
            }
        </script>

        <script type="module" src="/midi.js"></script>

        <script
            type="text/javascript"
            charset="utf-8"
            src="target/js/classes.js"
        ></script>
    </head>

    <body style="background-color: black" onload="main(['10', '0', 'highmem', 'members', 'true'])">
        <canvas id="game" width="789" height="532"></canvas>
    </body>
</html>
